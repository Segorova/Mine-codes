let str = 'Buy milk, cherry, butter, cherry, flour, cherry, sugar.';
let count = 0; // (1)
let index = str.indexOf('cherry'); // (2)
while(index !== -1){ // (3)
  count++; // (4)
  index = str.indexOf('cherry', index + 1); // (5)
}
console.log(count); // 3

Разберем вышеуказанный пример:

(1) – задаем переменную для счетчика вхождений подстроки.

(2) – находим индекс первого вхождения искомой подстроки. Это будет начальным значением для нашего цикла (в данном случае оно равно 10).

(3) – мы уже знаем, что цикл будет выполняться, пока условие истинно. А, если искомая подстрока не найдена в строке, то значение будет равно -1.

(4) – если подстрока будет найдена в строке, то увеличиваем счетчик на единицу.

(5) – увеличиваем шаг на единицу: индекс первого вхождения подстроки плюс 1. Следовательно, мы ищем подстроку со следующего индекса: с индекса 11, и следующее вхождение подстроки 'cherry' будет равно 26.

Затем цикл повторяется, т.к. условие еще истинно и т.д.
